{#
    List Layout
#}

{% extends "layouts/columns/_one" %}

{% block main %}

<section id="list--intro">
  <div id="list--intro-text">
    <h1>{{ entry.title }}</h1>
    {% if entry.headline %}<h2>{{ entry.headline }}</h2>{% endif %}
    <p>{{ entry.leadIn }}</p>
  </div>

  {% set image = entry.primaryImage.one() %}
  {% if image | length %}
    {%- import "macros/_images" as imageFunctions -%}
    {% set outputWidths = [480, 640, 1024, 1600] %}
    {%- set initialQuality = 20 -%}
    {%- if image.aspectRatio | length -%}
      {% set aspect = image.aspectRatio|split('x') %}
      {% set aspectRatio = (aspect[0]/aspect[1]) %}
      {%- set small = { width: 40, height: 40 / aspectRatio, quality: initialQuality } -%}
      {%- set medium = { width: 100, height: 100 / aspectRatio, quality: initialQuality } -%}
    {%- else -%}
      {%- set aspectRatio = (4/3) -%} {# Default aspect ratio #}
      {%- set small = { width: 40, quality: initialQuality } -%}
      {%- set medium = { width: 100, quality: initialQuality } -%}
    {%- endif -%}

    <figure>
      <img
        class="lazyload"
        src="{{ image.getUrl(small) }}"
        data-src="{{ image.getUrl(medium) }}"
        data-sizes="auto"
        data-srcset="{{ imageFunctions.srcset(image, outputWidths, aspectRatio) }}"
        {% if image.alt %}alt="{{ image.alt }}"{% endif %}>
      {% if image.caption %}
      <figcaption>{{ image.caption }}</figcaption>
      {% endif %}
    </figure>

  {% endif %}
</section>

<section id="list--content">
<ul>
  {% block listContent %}{% endblock %}
</ul>
</section>

{% endblock %}
